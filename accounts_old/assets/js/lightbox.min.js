
/*!
 * jquery.lightbox.js
 * https://github.com/duncanmcdougall/Responsive-Lightbox
 * Copyright 2013 Duncan McDougall and other contributors; @license Creative Commons Attribution 2.5
 *
 * Options: 
 * margin - int - default 50. Minimum margin around the image
 * nav - bool - default true. enable navigation
 * blur - bool - default true. Blur other content when open using css filter
 * minSize - int - default 0. Min window width or height to open lightbox. Below threshold will open image in a new tab.
 *
 */
(function(a){a.fn.lightbox=function(b){var d={margin:50,nav:true,blur:true,minSize:0};var c={items:[],lightbox:null,image:null,current:null,locked:false,caption:null,init:function(e){c.items=e;c.selector="lightbox-"+Math.random().toString().replace(".","");if(!c.lightbox){a("body").append('<div id="lightbox" style="display:none;"><div class="fb-share-button lightbox-fb lightbox-button" data-href="http://www.african-explorer.co.za" data-width="150"></div><a href="#" class="lightbox-close lightbox-button"></a><div class="lightbox-nav"><a href="#" class="lightbox-previous lightbox-button"></a><a href="#" class="lightbox-next lightbox-button"></a></div><div href="#" class="lightbox-caption"><p></p></div></div>');c.lightbox=a("#lightbox");c.caption=a(".lightbox-caption",c.lightbox)}if(c.items.length>1&&d.nav){a(".lightbox-nav",c.lightbox).show()}else{a(".lightbox-nav",c.lightbox).hide()}c.bindEvents()},loadImage:function(){if(d.blur){a("body").addClass("blurred")}a("img",c.lightbox).remove();c.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var e=a('<img src="'+a(c.current).attr("href")+'" draggable="false">');a(e).load(function(){a(".lightbox-loading").remove();c.lightbox.append(e);c.image=a("img",c.lightbox).hide();c.resizeImage();c.setCaption()})},setCaption:function(){var e=a(c.current).data("caption");if(!!e&&e.length>0){c.caption.fadeIn();a("p",c.caption).text(e)}else{c.caption.hide()}},resizeImage:function(){var g,f,e,i,h;f=a(window).height()-d.margin;e=a(window).outerWidth(true)-d.margin;c.image.width("").height("");i=c.image.height();h=c.image.width();if(h>e){g=e/h;h=e;i=Math.round(i*g)}if(i>f){g=f/i;i=f;h=Math.round(h*g)}c.image.width(h).height(i).css({top:(a(window).height()-c.image.outerHeight())/2+"px",left:(a(window).width()-c.image.outerWidth())/2+"px"}).show();c.locked=false},getCurrentIndex:function(){return a.inArray(c.current,c.items)},next:function(){if(c.locked){return false}c.locked=true;if(c.getCurrentIndex()>=c.items.length-1){a(c.items[0]).click()}else{a(c.items[c.getCurrentIndex()+1]).click()}},previous:function(){if(c.locked){return false}c.locked=true;if(c.getCurrentIndex()<=0){a(c.items[c.items.length-1]).click()}else{a(c.items[c.getCurrentIndex()-1]).click()}},bindEvents:function(){a(c.items).click(function(g){if(!a("#lightbox").is(":visible")&&(a(window).width()<d.minSize||a(window).height()<d.minSize)){a(this).attr("target","_blank");return}var f=a(this)[0];g.preventDefault();c.current=f;c.loadImage();a(document).on("keydown",function(h){if(h.keyCode===27){c.close()}if(h.keyCode===39){c.next()}if(h.keyCode===37){c.previous()}})});c.lightbox.on("click",function(f){if(this===f.target){c.close()}});a(c.lightbox).on("click",".lightbox-previous",function(){c.previous();return false});a(c.lightbox).on("click",".lightbox-next",function(){c.next();return false});a(c.lightbox).on("click",".lightbox-close",function(){c.close();return false});a(window).resize(function(){if(!c.image){return}c.resizeImage()})},close:function(){a(document).off("keydown");a(c.lightbox).fadeOut("fast");a("body").removeClass("blurred")}};a.extend(d,b);c.init(this)}})(jQuery);